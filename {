window.processPayment = async () = const { data: booking, error } = await supabase.from('bookings').insert({ user_id: currentUser.id, studio_id: selectedStudio.id, booking_date: bookingData.date, start_time: bookingData.startTime, end_time: bookingData.endTime, duration_hours: bookingData.duration, amount: bookingData.amount, status: 'pending_payment', payment_ref: bookingData.ref }).select().single(); if (error) { alert('Booking failed: ' + error.message); return; } alert('Redirecting to payment...'); };
